define("local_copilot/check_settings",["jquery"],function($){return{init:function(options){var opts=$.extend({},{url:"localhost",iconsuccess:"",iconinfo:"",iconerror:"",strcheck:"Check Moodle settings",strchecking:"Checking...",strnoinfo:"Something went wrong. Please contact your system administrator."},options),main=$("#admin-check_settings"),checksettingsbtn=main.find("button#check_settings");function rendererrorbox(content){var box=$("<div></div>").addClass("alert-error alert local_copilot_status_message");return box.append(opts.iconerror),box.append('<span style="inline-block">'+content+"</span>"),box}function renderinfobox(content){var box=$("<div></div>").addClass("alert-info alert local_copilot_status_message");return box.append(opts.iconinfo),box.append('<span style="inline-block">'+content+"</span>"),box}function updatedisplay(content){main.find("#check-settings-results").html(content)}function renderresults(results){var content=$('<div class="local_copilot_adminsetting_check_settings_results"></div>');if(!1===results)return content.append(renderinfobox(opts.strnoinfo)),updatedisplay(content),!0;if(void 0!==results.success){if(!0===results.success&&void 0!==results.data)return results.data.errormessages.forEach(function(message){content.append(rendererrorbox(message))}),results.data.success.forEach(function(message){content.append(function(content){var box=$("<div></div>").addClass("alert-success alert local_copilot_status_message");return box.append(opts.iconsuccess),box.append('<span style="inline-block">'+content+"</span>"),box}(message))}),results.data.info.forEach(function(message){content.append(renderinfobox(message))}),updatedisplay(content),!0;if(!1===results.success&&void 0!==results.data.errormessages)return results.data.errormessages.forEach(function(message){content.append(rendererrorbox(message))}),updatedisplay(content),!0}return content.append(rendererrorbox(opts.strerrorcheck)),updatedisplay(content),!0}void 0!==opts.lastresults&&renderresults(opts.lastresults),checksettingsbtn.on("click",function(e){e.preventDefault(),e.stopPropagation(),checksettingsbtn.html(opts.strchecking),$.ajax({url:opts.url,type:"GET",data:{mode:"check_settings"},dataType:"json",success:function(resp){checksettingsbtn.html(opts.strcheck),renderresults(resp)},error:function(data,errorThrown,textStatus){checksettingsbtn.html(opts.strcheck),updatedisplay(rendererrorbox(opts.strerrorcheck+" ("+textStatus+")"))}})})}}});

//# sourceMappingURL=check_settings.min.js.map